{"version":3,"sources":["../app.js"],"names":["express","require","path","favicon","logger","cookieParser","bodyParser","fs","routes","users","create","api","app","mongo","monk","db","set","join","__dirname","use","req","res","next","json","urlencoded","extended","src","dest","indentedSyntax","sourceMap","static","err","Error","status","get","render","message","error","module","exports"],"mappings":"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","file":"app.js","sourcesContent":["var express = require('express');\r\nvar path = require('path');\r\nvar favicon = require('serve-favicon');\r\nvar logger = require('morgan');\r\nvar cookieParser = require('cookie-parser');\r\nvar bodyParser = require('body-parser');\r\nvar fs = require(\"fs\");\r\n\r\nvar routes = require('./routes/index');\r\nvar users = require('./routes/users');\r\nvar create = require('./routes/create');\r\nvar api = require('./routes/api');\r\n\r\nvar app = express();\r\n\r\n// Database Setup\r\nvar mongo = require('mongodb');\r\nvar monk = require('monk');\r\nvar db = monk('localhost:27017/ballroom-data');\r\n\r\n// view engine setup\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'pug');\r\n\r\n// Make our db accessible to our router\r\napp.use(function(req,res,next){\r\n    req.db = db;\r\n    next();\r\n});\r\n\r\napp.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));\r\napp.use(logger('dev'));\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended: false}));\r\napp.use(cookieParser());\r\napp.use(require('node-sass-middleware')({\r\n    src: path.join(__dirname, 'public'),\r\n    dest: path.join(__dirname, 'public'),\r\n    indentedSyntax: true,\r\n    sourceMap: true\r\n}));\r\napp.use(express.static(path.join(__dirname, 'public')));\r\napp.use('/js', express.static(__dirname + '/node_modules/jquery/dist')); // redirect JS jQuery\r\napp.use('/js', express.static(__dirname + '/node_modules/materialize-css/dist/js')); // redirect materialize JS\r\napp.use('/css', express.static(__dirname + '/node_modules/materialize-css/dist/css')); // redirect materialize CSS\r\napp.use('/fonts', express.static(__dirname + '/node_modules/materialize-css/dist/fonts/')); // redirect fonts\r\n//TODO add font usage for materialize here\r\n\r\n\r\napp.use('/', routes);\r\napp.use('/users', users);\r\napp.use('/create', create);\r\napp.use('/api', api);\r\n\r\n// catch 404 and forward to error handler\r\napp.use(function (req, res, next) {\r\n    var err = new Error('Not Found');\r\n    err.status = 404;\r\n    next(err);\r\n});\r\n\r\n// error handlers\r\n\r\n// development error handler\r\n// will print stacktrace\r\nif (app.get('env') === 'development') {\r\n    app.use(function (err, req, res, next) {\r\n        res.status(err.status || 500);\r\n        res.render('error', {\r\n            message: err.message,\r\n            error: err\r\n        });\r\n    });\r\n}\r\n\r\n// production error handler\r\n// no stacktraces leaked to user\r\napp.use(function (err, req, res, next) {\r\n    res.status(err.status || 500);\r\n    res.render('error', {\r\n        message: err.message,\r\n        error: {}\r\n    });\r\n});\r\n\r\n\r\nmodule.exports = app;\r\n"]}